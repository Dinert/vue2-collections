"use strict";(self["webpackChunkvue2_template"]=self["webpackChunkvue2_template"]||[]).push([[607],{607:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"customTable"},[t("dinert-table-page",e._g(e._b({staticClass:"near searchForm",scopedSlots:e._u([{key:"search",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.search({name:"查询"})}}},[e._v("查询")]),t("el-button",{on:{click:function(t){return e.resetSearch({name:"重置"})}}},[e._v("重置")])]},proxy:!0},{key:"header-left",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.changeTable}},[e._v("切换表格数据")])]},proxy:!0}])},"dinert-table-page",{table:e.table,form:e.searchForm,formItem:e.searchFormItem,pagination:e.pagination,tableSlot:!0},!1),{"current-change":e.currentChange,"size-change":e.sizeChange}))],1)},s=[],d=(a(7658),a(259)),r=a(1579);const n=e=>[null,void 0,""].includes(e)?"-":e,o=e=>e?`${window.location.origin}/ym/api/mediaInfo/download/${e}`:"",l=(e,t=1e4)=>{if("undefined"===typeof e)return 0;const a=Number(e)/Number(t)||0;return a};var p={created(){this.tableId&&this.getTableSortData(),this.resetParams(),this.resetPagination()},data(){return{params:{},oldParams:{},table:{errData:"-",tableColumn:[],data:[],on:{"selection-change":e=>{this.selectTableData=e}}},defaultPagination:{total:17,pageSize:20,pageSizes:[10,20,30,50,100],currentPage:1},pagination:{},selectTableData:[],isDisabled:!1,searchForm:{model:{}},defaultSearchForm:{model:{}},searchFormItem:{},tableId:""}},computed:{isSelectTable(){return 0===this.selectTableData.length}},methods:{filterNullStrUndefind:d.filterNullStrUndefind,isEqual:r.isEqual,dataTransformRod:n,ImageIdTransUrl:o,handleAmount:l,cloneDeep:r.cloneDeep,filterTableParams(e){const t={};for(const a in e)[null,void 0,""].includes(e[a])||(t[a]=e[a]);return t},ajaxTableData(e={}){this.params=this.getTableParams(e);const t=this.isEqual(this.params,this.oldParams);e.isSame=t,"search"===e.name?(t||(this.pagination.currentPage=1,this.params=this.getTableParams(e)),this.oldParams={...this.params}):"reset"===e.name?(this.resetPagination(),this.params=this.getTableParams(e),this.oldParams={...this.params}):"delete"===e.name?this.table.data&&this.table.data.length&&1===this.table.data.length&&this.pagination.currentPage>1&&(this.pagination.currentPage=this.pagination.currentPage-1,this.params=this.getTableParams(e)):["current","size","reset"].includes(e.name||"")&&(this.oldParams=$lodash.cloneDeep(this.params));const a=_.cloneDeep(this.params);return a&&a.headers&&!a.headers.loading&&(a.headers.loading={target:".d-table-page ."+this.table.onlyClass,background:"rgba(255, 255, 255, .9)"}),this.$Api()&&this.$Api()[a.headers.controller]&&this.$Api()[a.headers.controller][a.headers.controllerName]?this.$Api()[a.headers.controller][a.headers.controllerName].request(a):request(a)},async getTableData(e){const t=await this.ajaxTableData(e);return this.changeTableData(t),this.checkboxBug(),this.table.key=!this.table.key,"function"===typeof this.ajaxTableDataAfter&&this.ajaxTableDataAfter(t,e),t},changeTableData(e){e.data=e.data||e.content;for(let t=0;t<e.data.length;t++)e.data[t].index=t+1+e.pageNum*e.pageSize;this.table.data=e.data,this.pagination.total=e.total},async ajaxTableSort(e){const t=await this.$Api().UserCommonCacheController.get_cache.request({path:{type:"tableIndex_"+this.tableId},...e});return t},async getTableSortData(e){const t=await this.ajaxTableSort(e);t.content&&this.changeTableSortData(t)},changeTableSortData(e){const t=e.content.tableIndex,a=[];t.forEach((e=>{a.push(e.id)})),this.table.tableColumn.sort(((e,t)=>-1===a.indexOf(e.prop)||-1===a.indexOf(t.prop)?0:a.indexOf(e.prop)-a.indexOf(t.prop)));for(let i=0;i<this.table.tableColumn.length;i++)void 0!==t[i]&&this.$set(this.table.tableColumn[i].checkbox,"checked",t[i].checked);this.table.key=!this.table.key},async dragEnd(e,t){const a=[];t.forEach((e=>{"operations"!==e.prop&&a.push({id:e.prop,checked:e.checkbox.checked})})),this.tableId&&await this.$Api().UserCommonCacheController.post_cache.request({data:{type:"tableIndex_"+this.tableId,content:{tableIndex:a}},headers:{hideNotify:!0,hideLoading:!0}})},async checkboxChange(e,t,a){const i=[];a.forEach((e=>{"operations"!==e.prop&&"index"!==e.prop&&"selection"!==e.prop&&i.push({id:e.prop,checked:e.checkbox.checked})})),this.tableId&&await this.$Api().UserCommonCacheController.post_cache.request({data:{type:"tableIndex_"+this.tableId,content:{tableIndex:i}},headers:{hideNotify:!0,hideLoading:!0}})},resetParams(){if((0,r.isEmpty)(this.defaultSearchForm.model))for(const e in this.searchForm.model)this.searchForm.model[e]="";else for(const e in this.defaultSearchForm.model)this.$set(this.searchForm.model,e,this.defaultSearchForm.model[e])},clearParams(){for(const e in this.model)this.model[e]=""},resetPagination(){for(const e in this.defaultPagination)this.pagination[e]=this.defaultPagination[e]},search(e={name:"search"}){return this.getTableData(e)},resetSearch(e={name:"reset"}){this.resetParams(),this.search(e)},currentChange(e){this.pagination.currentPage=e,this.search({name:"current",value:e})},sizeChange(e){const t=this.pagination.pageSize;this.pagination.pageSize=e,(t>e||this.pagination.currentPage<=Math.ceil(this.pagination.total/this.pagination.pageSize))&&this.search({name:"size",value:e})},getTableIds(e="id"){const t=[];return this.selectTableData.forEach((a=>{t.push(a[e])})),t},checkboxBug(){this.selectTableData=[{}],setTimeout((()=>{this.selectTableData=[]}),1)}}};const c=[{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"测试",heartApi:"www.baidu.com",id:"10026",name:"测试服务",scope:"0",serviceStatus:"1",updateTime:"2023-04-13 16:22:50",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:21},{api:"123",deleted:!1,departmentCode:"1-",description:"123",heartApi:"123",id:"10025",name:"立码报打卡",scope:"1",serviceStatus:"1",updateTime:"2023-04-13 11:37:56",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:22},{api:"12",deleted:!0,departmentCode:"1-",description:"123",heartApi:"123",id:"10024",name:"123",scope:"1",serviceStatus:"1",updateTime:"2023-04-19 15:01:55",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:23},{api:"tesat",deleted:!1,departmentCode:"1-",description:"tesat",heartApi:"teaet",id:"10023",name:"tesat",scope:"0",serviceStatus:"1",updateTime:"2023-04-12 16:12:06",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:24},{api:"321",deleted:!0,departmentCode:"1-",description:"312",heartApi:"312",id:"10017",name:"123",scope:"1",serviceStatus:"1",updateTime:"2023-04-19 15:01:18",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:25},{api:"123",deleted:!0,departmentCode:"1-",description:"123",id:"10016",name:"123",scope:"0",serviceStatus:"1",updateTime:"2023-04-12 16:12:04",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:26},{api:"aaa",deleted:!1,departmentCode:"1-",description:"aaa",id:"10015",name:"aaa",scope:"1",serviceStatus:"1",updateTime:"2023-04-06 17:32:51",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:27},{api:"sss",deleted:!1,departmentCode:"1-",description:"sss",id:"10014",name:"sss",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:47:45",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:28},{api:"qqq",deleted:!0,departmentCode:"1-",description:"qqq",id:"10013",name:"qqq",scope:"1",serviceStatus:"1",updateTime:"2023-04-12 09:44:58",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:29},{api:"321",deleted:!0,departmentCode:"1-",description:"321",id:"10012",name:"321",scope:"0",serviceStatus:"1",updateTime:"2023-03-13 15:34:00",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:30},{api:"123",deleted:!0,departmentCode:"1-",description:"123",id:"10011",name:"123",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:32:01",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:31},{api:"321",deleted:!0,departmentCode:"1-",description:"321",id:"10010",name:"321",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:31:46",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:32},{api:"123",deleted:!0,departmentCode:"1-",description:"123",id:"10009",name:"123",scope:"0",serviceStatus:"1",updateTime:"2023-03-13 15:31:45",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:33},{api:"www1",deleted:!0,departmentCode:"1-",description:"www1",id:"10008",name:"www1",scope:"0",serviceStatus:"1",updateTime:"2023-03-13 15:31:44",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:34},{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"百度四下 你就知道",id:"10004",name:"百度",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:31:43",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:35},{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"百度三下 你就知道",id:"10003",name:"百度",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:24:42",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:36},{api:"www.baidu.com",deleted:!0,departmentCode:"1-",description:"百度二下 你就知道",id:"10002",name:"百度",scope:"1",serviceStatus:"1",updateTime:"2023-03-13 15:25:12",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:37}],m=[{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"测试",heartApi:"www.baidu.com",id:"10026",name:"测试服务",scope:"0",serviceStatus:"1",updateTime:"2023-04-13 16:22:50",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:21},{api:"123",deleted:!1,departmentCode:"1-",description:"123",heartApi:"123",id:"10025",name:"立码报打卡",scope:"1",serviceStatus:"1",updateTime:"2023-04-13 11:37:56",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:22},{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"测试",heartApi:"www.baidu.com",id:"10026",name:"测试服务",scope:"0",serviceStatus:"1",updateTime:"2023-04-13 16:22:50",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:21},{api:"123",deleted:!1,departmentCode:"1-",description:"123",heartApi:"123",id:"10025",name:"立码报打卡",scope:"1",serviceStatus:"1",updateTime:"2023-04-13 11:37:56",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:22},{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"测试",heartApi:"www.baidu.com",id:"10026",name:"测试服务",scope:"0",serviceStatus:"1",updateTime:"2023-04-13 16:22:50",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:21},{api:"123",deleted:!1,departmentCode:"1-",description:"123",heartApi:"123",id:"10025",name:"立码报打卡",scope:"1",serviceStatus:"1",updateTime:"2023-04-13 11:37:56",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:22},{api:"www.baidu.com",deleted:!1,departmentCode:"1-",description:"测试",heartApi:"www.baidu.com",id:"10026",name:"测试服务",scope:"0",serviceStatus:"1",updateTime:"2023-04-13 16:22:50",updateUserName:"超级管理员",scope_detail:"不公开",serviceStatus_detail:"正常",index:21},{api:"123",deleted:!1,departmentCode:"1-",description:"123",heartApi:"123",id:"10025",name:"立码报打卡",scope:"1",serviceStatus:"1",updateTime:"2023-04-13 11:37:56",updateUserName:"超级管理员",scope_detail:"公开",serviceStatus_detail:"正常",index:22}];var h={name:"CustomTable",mixins:[p],mounted(){this.$notify.success({title:"成功",dangerouslyUseHTMLString:!0,message:"<h3>功能说明：</h3>\n                      <h4>1. 根据element-ui的table二次封装table-page</h4>\n                      <h4>2. 自适应的表格缩放，支持配置性的复杂表头、支持拖拽改变位置</h4>\n                      <h4>3. 基本的element-ui的表格配置和方法都可以使用</h4>\n                    "})},data(){return{table:{children:!0,data:c,tableColumn:[{prop:"id",label:"服务ID",minWidth:120},{prop:"name",label:"服务名称",minWidth:120},{prop:"api",label:"服务接口",minWidth:120},{prop:"heartApi",label:"服务心跳接口",minWidth:120,formatter:e=>this.dataTransformRod(e.row.heartApi)},{prop:"description",label:"服务说明",minWidth:120,formatter:e=>this.dataTransformRod(e.row.description)},{prop:"scope_detail",label:"发布范围",minWidth:120},{prop:"deleted",label:"使用状态",minWidth:80},{prop:"serviceStatus_detail",label:"服务状态",minWidth:80},{prop:"updateUserName",label:"更新人",minWidth:100},{prop:"updateTime",label:"更新时间",minWidth:130},{prop:"operations",label:"操作",align:"center",fixed:"right",width:230}]},searchFormItem:{id:{label:"服务ID",type:"input"},name:{label:"服务名称",type:"input",options:{}},deleted:{label:"使用状态",type:"select",options:{options:[{label:"启用",value:!0},{label:"禁用",value:!1}]}},serviceStatus:{label:"服务状态",type:"select",options:{options:[{label:"正常",value:"1"},{label:"异常",value:"0"}]}},departmentCode:{label:"机构管理",type:"select",options:{}}}}},computed:{},methods:{changeTable(){console.log(this.table.data.length,"this.table.data.lengththis.table.data.length"),this.table.data.length===m?this.table.data=c:this.table.data=m,this.$message.success("请缩放浏览器查看效果")}}},u=h,b=a(3736),g=(0,b.Z)(u,i,s,!1,null,"10a2e1f2",null),S=g.exports}}]);