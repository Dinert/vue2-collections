"use strict";(self["webpackChunkvue2_template"]=self["webpackChunkvue2_template"]||[]).push([[49],{6049:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=function(){var e=this,t=e._self._c;return t("section",{staticClass:"map"},[t("div",{attrs:{id:"map"}}),t("div",{staticClass:"map-search"},[t("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")]),t("el-button",{attrs:{type:e.flagCylinder?"primary":"default"},on:{click:e.cylinderClick}},[e._v("柱状走航图")]),t("el-button",{attrs:{type:e.flagMesh?"primary":"default"},on:{click:e.meshClick}},[e._v("面走航图")]),t("el-button",{attrs:{type:e.flagPoint?"primary":"default"},on:{click:e.pointClick}},[e._v("点走航图")]),t("el-button",{attrs:{type:e.flagLine?"primary":"default"},on:{click:e.lineClick}},[e._v("渐变线走航图")])],1),t("div",{staticClass:"input-card",staticStyle:{width:"13rem"}},[t("h4",[e._v("官方默认自定义样式")]),t("div",{attrs:{id:"map-styles"}},[t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",checked:"",value:"normal"},on:{change:function(t){return e.inputClick("normal")}}}),t("span",[e._v("标准")]),t("span",{staticClass:"input-text"},[e._v("normal")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"dark"},on:{change:function(t){return e.inputClick("dark")}}}),t("span",[e._v("幻影黑")]),t("span",{staticClass:"input-text"},[e._v("dark")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"light"},on:{change:function(t){return e.inputClick("light")}}}),t("span",[e._v("月光银")]),t("span",{staticClass:"input-text"},[e._v("light")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"whitesmoke"},on:{change:function(t){return e.inputClick("whitesmoke")}}}),t("span",[e._v("远山黛")]),t("span",{staticClass:"input-text"},[e._v("whitesmoke")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"fresh"},on:{change:function(t){return e.inputClick("fresh")}}}),t("span",[e._v("草色青")]),t("span",{staticClass:"input-text"},[e._v("fresh")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"grey"},on:{change:function(t){return e.inputClick("grey")}}}),t("span",[e._v("雅士灰")]),t("span",{staticClass:"input-text"},[e._v("grey")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"graffiti"},on:{change:function(t){return e.inputClick("graffiti")}}}),t("span",[e._v("涂鸦")]),t("span",{staticClass:"input-text"},[e._v("graffiti")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"macaron"},on:{change:function(t){return e.inputClick("macaron")}}}),t("span",[e._v("马卡龙")]),t("span",{staticClass:"input-text"},[e._v("macaron")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"blue"},on:{change:function(t){return e.inputClick("blue")}}}),t("span",[e._v("靛青蓝")]),t("span",{staticClass:"input-text"},[e._v("blue")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"darkblue"},on:{change:function(t){return e.inputClick("darkblue")}}}),t("span",[e._v("极夜蓝")]),t("span",{staticClass:"input-text"},[e._v("darkblue")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"wine"},on:{change:function(t){return e.inputClick("wine")}}}),t("span",[e._v("酱籽")]),t("span",{staticClass:"input-text"},[e._v("wine")])])])])])},i=[],o=n(3317),s=(n(7658),n(1579)),l=n.n(s);const p=(e,t)=>{const n={AQI:[0,50,100,150,200,300,500],SO2:{24:[0,50,150,475,800,1600,2100],1:[0,150,500,650,800,1600,2100]},NO2:{24:[0,40,80,180,280,565,750],1:[0,100,200,700,1200,2340,3090]},PM10:[0,50,150,250,350,420,500],CO:{24:[0,2,4,14,24,36,48],1:[0,5,10,35,60,90,120]},O3:{1:[0,160,200,300,400,800,1e3],8:[0,100,160,215,265,800,1e3]},O3_8h:[0,100,160,215,265,800,1e3],"PM2.5":[0,35,75,115,150,250,350]};e=e&&e.toLocaleUpperCase();const a=e?n[e]:n.AQI;return t>=0&&t<=a[1]?{color:"#62D13F",poll:"优",className:"great",bgClassName:"bg-great",level:"一级"}:t>a[1]&&t<=a[2]?{color:"#FBD02B",poll:"良",className:"good",bgClassName:"bg-good",level:"二级"}:t>a[2]&&t<=a[3]?{color:"#FF7E00",poll:"轻度污染",className:"light",bgClassName:"bg-light",level:"三级"}:t>a[3]&&t<=a[4]?{color:"#FF401A",poll:"中度污染",className:"moderate",bgClassName:"bg-moderate",level:"四级"}:t>a[4]&&t<=a[5]?{color:"#D20040",poll:"重度污染",className:"weight",bgClassName:"bg-weight",level:"五级"}:t>a[5]?{color:"#9C0A4E",poll:"严重污染",className:"serious",bgClassName:"bg-serious",level:"六级"}:{color:"#999",poll:"无效",className:"invalid",bgClassName:"bg-invalid"}},r=function(e){const t=[];for(let n=0;n<e.length;n++){const a=[];a.push(Number(e[n]["经度浓度"])||Number(e[n]["经度"])||Number(e[n].Longitude),Number(e[n]["纬度浓度"])||Number(e[n]["纬度"])||Number(e[n].Latitude)),e[n].lnglat=a,t.push(e[n])}return t},c=function(e,t){const n={unit:"meter",style:{radius:20,height:function(e){const n=100*e.value[t.type]||0;return n},color:function(e){const n=e.value[t.type]||0,a=p(t.type,n).color;return a}},selectStyle:{opacity:.2},offset:[130,100]};return new Promise(((a,i)=>{const o=l().defaultsDeep(l().cloneDeep(t),n),s=new Loca.ScatterPointLayer({map:e,eventSupport:!0});let p;o.path=r(o.path),s.setData(o.path,{lnglat:"lnglat"}),s.on("mousemove",(t=>{const n=t.originalEvent,a=t.rawData;p||(p=new AMap.InfoWindow({autoMove:!1,isCustom:!0,offset:new AMap.Pixel(o.offset[0],o.offset[1])}));let i='<div class="cylinderInfo"><p class="cylinderInfo-car"><strong>站点：</strong><span>'+a.StationId+'</span></p><p class="cylinderInfo-time"><strong>时间：</strong><span>'+a.TimePoint+'</span></p><p class="cylinderInfo-type"><strong>'+o.type+"：</strong><span>"+a[o.type]+'</span></p><p class="cylinderInfo-value"><strong>首要污染物：</strong><span>'+a["首要污染物"]+"</span></p></div>";i="function"===typeof o.moveCallback&&o.moveCallback(t)?o.moveCallback(t):i,p.setContent(i);const s=n.offsetX,l=n.offsetY,r=e.containerToLngLat(new AMap.Pixel(s,l));p.open(e,r)})),s.on("mouseleave",(t=>{e.clearInfoWindow()})),s.setOptions(o),s.render(),o.setView&&s.setFitView(),o.pitch&&e.setPitch(o.pitch),o.zoom&&e.setZoom(o.zoom),o.hide&&s.hide(),a(s)}))};var u=c;const d=function(e,t){const n={path:[],type:"AQI",lng:"经度浓度",lat:"纬度浓度"};return new Promise(((a,i)=>{const o=l().defaultsDeep(l().cloneDeep(t),n),s=o.path,r=[],c=new AMap.Object3DLayer;for(let t=1;t<s.length;t++){const n=s[t][o.lng],a=s[t][o.lat],i=s[t-1][o.lng],l=s[t-1][o.lat],u=e.lngLatToGeodeticCoord(new AMap.LngLat(n,a)),d=e.lngLatToGeodeticCoord(new AMap.LngLat(i,l)),h=new AMap.Object3D.Mesh,f=h.geometry;let g=s[t-1][o.type]||0,v=s[t][o.type]||0;v*=500,g*=500;const m=s[t-1][o.type],y=s[t][o.type],w=AMap.Util.color2RgbaArray(p(o.type,m).color),A=AMap.Util.color2RgbaArray(p(o.type,y).color);f.vertices.push(u.x,u.y,-g),f.vertices.push(d.x,d.y,-v),f.vertices.push(d.x,d.y,0),f.vertices.push(u.x,u.y,0),f.faces.push(0,1,3),f.faces.push(1,2,3),f.faces.push(1,0,3),f.faces.push(2,1,3),f.vertexColors.push(A[0],A[1],A[2],A[3]),f.vertexColors.push(w[0],w[1],w[2],w[3]),f.vertexColors.push(w[0],w[1],w[2],w[3]),f.vertexColors.push(A[0],A[1],A[2],A[3]),h.transparent=!0,"function"===typeof o.configCallback&&o.configCallback(h,f),r.push(h),c.add(h),"function"===typeof o.callback&&o.callback(h,f)}e.add(c),a(c)}))};var h=d;const f=function(e){const t=[];for(let n=0;n<e.length;n++){const a=[];a.push(Number(e[n]["经度浓度"])||Number(e[n]["经度"])||Number(e[n].Longitude),Number(e[n]["纬度浓度"])||Number(e[n]["纬度"])||Number(e[n].Latitude)),e[n].lnglat=a,t.push(e[n])}return t},g=function(e,t){const n={style:{radius:10,color:function(e){const n=t.type||"AQI",a=e.value[n]||0,i=p(n,a).color;return i},opacity:.8},selectStyle:{radius:14,borderWidth:1}};return new Promise(((a,i)=>{const o=l().defaultsDeep(l().cloneDeep(t),n),s=new Loca.PointLayer({eventSupport:!0,map:e});let p;o.path=f(o.path),s.setData(o.path,{lnglat:"lnglat"}),s.on("mousemove",(t=>{const n=t.originalEvent,a=t.rawData;p||(p=new AMap.InfoWindow({autoMove:!1,isCustom:!0,offset:new AMap.Pixel(130,100)}));const i='<div class="cylinderInfo"><p class="cylinderInfo-car"><span>站点：</span><b>'+a.StationId+'</b></p><p class="cylinderInfo-time"><span>时间：</span><b>'+a.TimePoint+'</b></p><p class="cylinderInfo-value"><span>'+o.type+"：</span><b>"+a[o.type]+'</b></p><p class="cylinderInfo-value"><span>首要污染物：</span><b>'+a["首要污染物"]+"</b></p></div>";p.setContent(i);const s=n.offsetX,l=n.offsetY,r=e.containerToLngLat(new AMap.Pixel(s,l));p.open(e,r)})),s.on("mouseleave",(t=>{e.clearInfoWindow()})),s.setOptions(o),s.render(),o.setView&&s.setFitView(),o.pitch&&e.setPitch(o.pitch),o.zoom&&e.setZoom(o.zoom),o.hide&&s.hide(),a(s)}))};var v=g;const m=function(e,t,n){const a={path:[],type:"AQI",lng:"经度浓度",lat:"纬度浓度",alwaysRender:!0,zIndex:120,canvas:{lineWidth:6,lineCap:"round"}};return new Promise(((n,i)=>{const o=l().defaultsDeep(l().cloneDeep(t),a),s=document.createElement("canvas"),r=o.path,c=o.type,u=(t.lngLat,function(){const t=AMap.Browser.retina,n=e.getSize();let a=n.width,i=n.height;s.width=a,s.height=i,t&&(a*=2,i*=2),s.width=a,s.height=i;const l=s.getContext("2d");l.lineWidth=o.canvas.lineWidth,l.lineCap=o.canvas.lineCap;for(let s=1;s<r.length;s++){const t=e.lngLatToContainer(new AMap.LngLat(r[s-1][o.lng],r[s-1][o.lat])),n=e.lngLatToContainer(new AMap.LngLat(r[s][o.lng],r[s][o.lat])),a=r[s-1][c]||0,i=r[s][c]||0,u=l.createLinearGradient(t.x,t.y,n.x,n.y);u.addColorStop(0,p(c,a).color),u.addColorStop(1,p(c,i).color),l.strokeStyle=u,l.beginPath(),l.moveTo(t.x,t.y),l.lineTo(n.x,n.y),l.stroke()}return s}),d=new AMap.CustomLayer(s,o);d.render=u,e.add(d),t.hide&&d.hide(),n(d)}))};var y=m;const w=n(5156);let A=null,M=null,C=null,I=null,b=null;var L={name:"Region",async mounted(){A=await(0,o.Z)("map",{viewMode:"3D"},{plugins:["Map3D","AMap.DistrictSearch","AMap.DistrictLayer"],version:"1.4.15",Loca:{version:"1.3.2"}}),M=await u(A,{path:w,type:"AQI",style:{radius:100},pitch:60,setView:!0}),C=await h(A,{path:w,type:"AQI",setView:!0}),I=await v(A,{path:w,type:"AQI",setView:!0}),b=await y(A,{path:w,type:"AQI",setView:!0}),this.$notify.success({title:"成功",dangerouslyUseHTMLString:!0,message:"    <h3>功能说明：</h3>\n    <h4>1. 根据走航车的行驶路线的经纬度，带有污染物常规六参数AQI、PM2.5、PM10、SO2、NO2、CO生成不同类型的走航图</h4>\n    <h4>2. 柱状走航图：根据污染物的浓度大小，生成不同高度不同颜色的3D柱形图</h4>\n    <h4>3. 面走航图：根据污染物的浓度大小，生成不同高度的3D面积图，前后的污染物浓度使用颜色差值渲染展示</h4>\n    <h4>4. 线走航图：根据污染物的浓度大小，差值颜色渲染成渐变路线图</h4>\n    <h4>5. 点走航图：根据污染物的浓度大小，生成不同颜色的点位图</h4>"})},data(){return{flagCylinder:!0,flagMesh:!0,flagPoint:!0,flagLine:!0}},methods:{inputClick(e){const t="amap://styles/"+e;this.gaodeMap.setMapStyle(t)},reset(){this.flagCylinder=!0,this.flagMesh=!0,this.flagPoint=!0,this.flagLine=!0,A.setPitch(60),M.setFitView(),M.show(),C.show(),I.show(),b.show()},cylinderClick(){this.flagCylinder?(M.hide(),this.flagCylinder=!1):(M.show(),this.flagCylinder=!0)},meshClick(){this.flagMesh?(C.hide(),this.flagMesh=!1):(C.show(),this.flagMesh=!0)},pointClick(){this.flagPoint?(I.hide(),this.flagPoint=!1):(I.show(),this.flagPoint=!0)},lineClick(){this.flagLine?(b.hide(),this.flagLine=!1):(b.show(),this.flagLine=!0)}}},k=L,U=n(3736),_=(0,U.Z)(k,a,i,!1,null,"593aa566",null),P=_.exports},6512:function(e,t,n){n(7658),n(1703),function(t,n){e.exports=n()}(0,(function(){function e(e){var a=[];return e.AMapUI&&a.push(t(e.AMapUI)),e.Loca&&a.push(n(e.Loca)),Promise.all(a)}function t(e){return new Promise((function(t,n){var l=[];if(e.plugins)for(var p=0;p<e.plugins.length;p+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[p])&&l.push(e.plugins[p]);if(o.AMapUI===a.failed)n("前次请求 AMapUI 失败");else if(o.AMapUI===a.notload){o.AMapUI=a.loading,i.AMapUI.version=e.version||i.AMapUI.version,p=i.AMapUI.version;var r=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+p+"/main.js",c.onerror=function(e){o.AMapUI=a.failed,n("请求 AMapUI 失败")},c.onload=function(){if(o.AMapUI=a.loaded,l.length)window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var a=l[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(t();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()}));else for(t();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},r.appendChild(c)}else o.AMapUI===a.loaded?e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var a=l[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}t()})):t():e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.AMapUI.push((function(e){e?n(e):l.length?window.AMapUI.loadUI(l,(function(){for(var e=0,n=l.length;e<n;e++){var a=l[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}t()})):t()}))}))}function n(e){return new Promise((function(t,n){if(o.Loca===a.failed)n("前次请求 Loca 失败");else if(o.Loca===a.notload){o.Loca=a.loading,i.Loca.version=e.version||i.Loca.version;var l=i.Loca.version,p=i.AMap.version.startsWith("2"),r=l.startsWith("2");if(p&&!r||!p&&r)n("JSAPI 与 Loca 版本不对应！！");else{p=i.key,r=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+l+"&key="+p,c.onerror=function(e){o.Loca=a.failed,n("请求 AMapUI 失败")},c.onload=function(){for(o.Loca=a.loaded,t();s.Loca.length;)s.Loca.splice(0,1)[0]()},r.appendChild(c)}}else o.Loca===a.loaded?e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):t():e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):s.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(a||(a={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]},l=[],p=function(e){"function"==typeof e&&(o.AMap===a.loaded?e(window.AMap):l.push(e))};return{load:function(t){return new Promise((function(n,s){if(o.AMap==a.failed)s("");else if(o.AMap==a.notload){var r=t.key,c=t.version,u=t.plugins;r?(window.AMap&&"lbs.amap.com"!==location.host&&s("禁止多种API加载方式混用"),i.key=r,i.AMap.version=c||i.AMap.version,i.AMap.plugins=u||i.AMap.plugins,o.AMap=a.loading,c=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)o.AMap=a.failed,s(i);else for(o.AMap=a.loaded,e(t).then((function(){n(window.AMap)}))["catch"](s);l.length;)l.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+r+"&plugin="+i.AMap.plugins.join(","),u.onerror=function(e){o.AMap=a.failed,s(e)},c.appendChild(u)):s("请填写key")}else if(o.AMap==a.loaded)if(t.key&&t.key!==i.key)s("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)s("不允许多个版本 JSAPI 混用");else{if(r=[],t.plugins)for(c=0;c<t.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(t.plugins[c])&&r.push(t.plugins[c]);r.length?window.AMap.plugin(r,(function(){e(t).then((function(){n(window.AMap)}))["catch"](s)})):e(t).then((function(){n(window.AMap)}))["catch"](s)}else if(t.key&&t.key!==i.key)s("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)s("不允许多个版本 JSAPI 混用");else{var d=[];if(t.plugins)for(c=0;c<t.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(t.plugins[c])&&d.push(t.plugins[c]);p((function(){d.length?window.AMap.plugin(d,(function(){e(t).then((function(){n(window.AMap)}))["catch"](s)})):e(t).then((function(){n(window.AMap)}))["catch"](s)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]}}}}))},3317:function(e,t,n){var a=n(1579),i=n.n(a),o=n(6512),s=n.n(o);let l={};window._AMapSecurityConfig={securityJsCode:"530231bc60a6258f7fa6b84d5d532761"};const p=(e,t,n)=>{s().reset&&s().reset();const a={zoom:5,center:[105.602725,37.076636]};return new Promise(((o,p)=>{const r=i().defaultsDeep(i().cloneDeep(t),a),c=i().defaultsDeep(i().cloneDeep(n),{key:"720d49e9651522b9b4661195147dc067",version:"2.0",plugins:[]});s().load(c).then((t=>{l=c,console.log(l,"lastMapOptions");const n=new t.Map(e,r);o(n)})).catch((e=>{p(e)}))}))};t["Z"]=p}}]);