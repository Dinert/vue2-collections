"use strict";(self["webpackChunkvue2_template"]=self["webpackChunkvue2_template"]||[]).push([[64],{5064:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=function(){var e=this,t=e._self._c;return t("section",{staticClass:"map"},[t("div",{attrs:{id:"map"}}),t("div",{staticClass:"map-search"},[t("el-autocomplete",{attrs:{placeholder:"请输入区县级以上的区域名称","fetch-suggestions":e.querySearch},on:{select:e.search},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),t("div",{staticClass:"input-card",staticStyle:{width:"13rem"}},[t("h4",[e._v("官方默认自定义样式")]),t("div",{attrs:{id:"map-styles"}},[t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",checked:"",value:"normal"},on:{change:function(t){return e.inputClick("normal")}}}),t("span",[e._v("标准")]),t("span",{staticClass:"input-text"},[e._v("normal")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"dark"},on:{change:function(t){return e.inputClick("dark")}}}),t("span",[e._v("幻影黑")]),t("span",{staticClass:"input-text"},[e._v("dark")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"light"},on:{change:function(t){return e.inputClick("light")}}}),t("span",[e._v("月光银")]),t("span",{staticClass:"input-text"},[e._v("light")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"whitesmoke"},on:{change:function(t){return e.inputClick("whitesmoke")}}}),t("span",[e._v("远山黛")]),t("span",{staticClass:"input-text"},[e._v("whitesmoke")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"fresh"},on:{change:function(t){return e.inputClick("fresh")}}}),t("span",[e._v("草色青")]),t("span",{staticClass:"input-text"},[e._v("fresh")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"grey"},on:{change:function(t){return e.inputClick("grey")}}}),t("span",[e._v("雅士灰")]),t("span",{staticClass:"input-text"},[e._v("grey")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"graffiti"},on:{change:function(t){return e.inputClick("graffiti")}}}),t("span",[e._v("涂鸦")]),t("span",{staticClass:"input-text"},[e._v("graffiti")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"macaron"},on:{change:function(t){return e.inputClick("macaron")}}}),t("span",[e._v("马卡龙")]),t("span",{staticClass:"input-text"},[e._v("macaron")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"blue"},on:{change:function(t){return e.inputClick("blue")}}}),t("span",[e._v("靛青蓝")]),t("span",{staticClass:"input-text"},[e._v("blue")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"darkblue"},on:{change:function(t){return e.inputClick("darkblue")}}}),t("span",[e._v("极夜蓝")]),t("span",{staticClass:"input-text"},[e._v("darkblue")])]),t("div",{staticClass:"input-item"},[t("input",{attrs:{type:"radio",name:"mapStyle",value:"wine"},on:{change:function(t){return e.inputClick("wine")}}}),t("span",[e._v("酱籽")]),t("span",{staticClass:"input-text"},[e._v("wine")])])])])])},i=[],s=(a(7658),a(4727)),o=a(4806),r=a.n(o);const p=function(e,t){const a={path:[],strokeColor:"#99ffff",strokeWeight:4,height:-8e4,color:"#0088ffcc",zIndex:2,transparent:!0};return new Promise(((n,i)=>{const s=r().defaultsDeep(r().cloneDeep(t),a),o=new AMap.Object3DLayer({zIndex:s.zIndex}),p=new AMap.Object3D.Wall(s);p.transparent=!0;for(let t=0;t<s.path.length;t++)new AMap.Polyline({path:s.path[t],strokeColor:"#99ffff",strokeWeight:4,map:e});o.add(p),e.add(o),s.cityName&&e.setCity(s.cityName),s.pitch&&e.setPitch(s.pitch),n(o)}))};var l=p,c=a(2547);let u=null,d=null;var h={name:"AreaFace",async created(){u=await(0,s.Z)("map",{viewMode:"3D"},{plugins:["Map3D","AMap.DistrictSearch","AMap.DistrictLayer"],version:"1.4.15",Loca:{version:"1.3.2"}}),this.search(),this.$notify.success({title:"成功",dangerouslyUseHTMLString:!0,message:"<h3>功能说明：</h3>\n                      <h4>1. 使用高德地图的API生成该区域的3D掩模</h4>\n                      <h4>2. 支持生成县级以上的区域掩模</h4>\n                    ",duration:0})},data(){return{pathData:"",name:"北京",restaurants:[{value:"广东省",address:"广东省"},{value:"广州市",address:"广州市"},{value:"河源市",address:"河源市"}]}},methods:{inputClick(e){const t="amap://styles/"+e;u.setMapStyle(t)},querySearch(e,t){const a=this.restaurants,n=e?a.filter(this.createFilter(e)):a;t(n)},isRestaurants(e){return this.restaurants.filter((t=>t.value===e))},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},search(){return this.name?(0,c.Z)({mask:[this.name]}).then((async e=>{0===this.isRestaurants(this.name).length&&this.restaurants.push({value:this.name,address:this.name}),this.$message({type:"success",message:"渲染"+this.name+"的区域成功"}),d&&u.remove(d),d=await l(u,{path:e.bounds,cityName:e.content.name,pitch:50}),u.setMask(e.mask)})).catch((()=>{this.$message({type:"error",message:"渲染"+this.name+"失败"})})):this.$message({type:"error",message:"请输入区县级以上的区域名称"})}}},f=h,v=a(1001),m=(0,v.Z)(f,n,i,!1,null,"a8b085f2",null),g=m.exports},7634:function(e,t,a){a(7658),function(t,a){e.exports=a()}(0,(function(){function e(e){var n=[];return e.AMapUI&&n.push(t(e.AMapUI)),e.Loca&&n.push(a(e.Loca)),Promise.all(n)}function t(e){return new Promise((function(t,a){var r=[];if(e.plugins)for(var p=0;p<e.plugins.length;p+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[p])&&r.push(e.plugins[p]);if(s.AMapUI===n.failed)a("前次请求 AMapUI 失败");else if(s.AMapUI===n.notload){s.AMapUI=n.loading,i.AMapUI.version=e.version||i.AMapUI.version,p=i.AMapUI.version;var l=document.body||document.head,c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/ui/"+p+"/main.js",c.onerror=function(e){s.AMapUI=n.failed,a("请求 AMapUI 失败")},c.onload=function(){if(s.AMapUI=n.loaded,r.length)window.AMapUI.loadUI(r,(function(){for(var e=0,a=r.length;e<a;e++){var n=r[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}for(t();o.AMapUI.length;)o.AMapUI.splice(0,1)[0]()}));else for(t();o.AMapUI.length;)o.AMapUI.splice(0,1)[0]()},l.appendChild(c)}else s.AMapUI===n.loaded?e.version&&e.version!==i.AMapUI.version?a("不允许多个版本 AMapUI 混用"):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,a=r.length;e<a;e++){var n=r[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}t()})):t():e.version&&e.version!==i.AMapUI.version?a("不允许多个版本 AMapUI 混用"):o.AMapUI.push((function(e){e?a(e):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,a=r.length;e<a;e++){var n=r[e].split("/").slice(-1)[0];window.AMapUI[n]=arguments[e]}t()})):t()}))}))}function a(e){return new Promise((function(t,a){if(s.Loca===n.failed)a("前次请求 Loca 失败");else if(s.Loca===n.notload){s.Loca=n.loading,i.Loca.version=e.version||i.Loca.version;var r=i.Loca.version,p=i.AMap.version.startsWith("2"),l=r.startsWith("2");if(p&&!l||!p&&l)a("JSAPI 与 Loca 版本不对应！！");else{p=i.key,l=document.body||document.head;var c=document.createElement("script");c.type="text/javascript",c.src="https://webapi.amap.com/loca?v="+r+"&key="+p,c.onerror=function(e){s.Loca=n.failed,a("请求 AMapUI 失败")},c.onload=function(){for(s.Loca=n.loaded,t();o.Loca.length;)o.Loca.splice(0,1)[0]()},l.appendChild(c)}}else s.Loca===n.loaded?e.version&&e.version!==i.Loca.version?a("不允许多个版本 Loca 混用"):t():e.version&&e.version!==i.Loca.version?a("不允许多个版本 Loca 混用"):o.Loca.push((function(e){e?a(e):a()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},o={AMap:[],AMapUI:[],Loca:[]},r=[],p=function(e){"function"==typeof e&&(s.AMap===n.loaded?e(window.AMap):r.push(e))};return{load:function(t){return new Promise((function(a,o){if(s.AMap==n.failed)o("");else if(s.AMap==n.notload){var l=t.key,c=t.version,u=t.plugins;l?(window.AMap&&"lbs.amap.com"!==location.host&&o("禁止多种API加载方式混用"),i.key=l,i.AMap.version=c||i.AMap.version,i.AMap.plugins=u||i.AMap.plugins,s.AMap=n.loading,c=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)s.AMap=n.failed,o(i);else for(s.AMap=n.loaded,e(t).then((function(){a(window.AMap)}))["catch"](o);r.length;)r.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+l+"&plugin="+i.AMap.plugins.join(","),u.onerror=function(e){s.AMap=n.failed,o(e)},c.appendChild(u)):o("请填写key")}else if(s.AMap==n.loaded)if(t.key&&t.key!==i.key)o("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)o("不允许多个版本 JSAPI 混用");else{if(l=[],t.plugins)for(c=0;c<t.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(t.plugins[c])&&l.push(t.plugins[c]);l.length?window.AMap.plugin(l,(function(){e(t).then((function(){a(window.AMap)}))["catch"](o)})):e(t).then((function(){a(window.AMap)}))["catch"](o)}else if(t.key&&t.key!==i.key)o("多个不一致的 key");else if(t.version&&t.version!==i.AMap.version)o("不允许多个版本 JSAPI 混用");else{var d=[];if(t.plugins)for(c=0;c<t.plugins.length;c+=1)-1==i.AMap.plugins.indexOf(t.plugins[c])&&d.push(t.plugins[c]);p((function(){d.length?window.AMap.plugin(d,(function(){e(t).then((function(){a(window.AMap)}))["catch"](o)})):e(t).then((function(){a(window.AMap)}))["catch"](o)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},o={AMap:[],AMapUI:[],Loca:[]}}}}))},2547:function(e,t,a){a(7658);var n=a(4806),i=a.n(n);const s=function(e){const t={subdistrict:0,extensions:"all",level:"district",origin:!0};return new Promise(((a,n)=>{const s=i().defaultsDeep(i().cloneDeep(e),t),o=new AMap.DistrictSearch(s);s.mask="string"===typeof s.mask?[s.mask]:s.mask;const r=[],p=[],l=[],c=[];for(let e=0;e<s.mask.length;e++){const t=s.mask[e];o.search(t,((e,t)=>{if("complete"===e){const e=t.districtList[0],n=t.districtList[0].boundaries;c.push(n);let i=[];if(s.origin){for(let e=0;e<n.length;e++)r.push([n[e]]),l.push(n[e]);i={mask:r,bounds:l,outLine:c,content:e},a(i)}else{for(let e=0;e<n.length;e++){for(let t=0;t<n[e].length;t++)r.push([n[e][t].lng,n[e][t].lat]);p.push(r),l.push(n[e])}i={mask:r,bounds:l,outLine:c,content:e},a(i)}}else n({status:0,msg:"查找失败"})}))}}))};t["Z"]=s},4727:function(e,t,a){var n=a(4806),i=a.n(n),s=a(7634),o=a.n(s);let r={};window._AMapSecurityConfig={securityJsCode:"530231bc60a6258f7fa6b84d5d532761"};const p=(e,t,a)=>{o().reset&&o().reset();const n={zoom:5,center:[105.602725,37.076636]};return new Promise(((s,p)=>{const l=i().defaultsDeep(i().cloneDeep(t),n),c=i().defaultsDeep(i().cloneDeep(a),{key:"720d49e9651522b9b4661195147dc067",version:"2.0",plugins:[]});o().load(c).then((t=>{r=c,console.log(r,"lastMapOptions");const a=new t.Map(e,l);s(a)})).catch((e=>{p(e)}))}))};t["Z"]=p}}]);